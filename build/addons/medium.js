module.exports=function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}({0:function(t,e,n){"use strict";var o=function(t){return t&&t.__esModule?t:{"default":t}},i=n(13),r=o(i),a=n(1),s=o(a);n(38);var u=s["default"].createClass({displayName:"Medium",propTypes:{content:s["default"].PropTypes.object.isRequired,onChange:s["default"].PropTypes.func.isRequired},getDefaultProps:function(){return{content:{html:"",text:""},options:{buttons:["header1","header2","bold","italic","underline","anchor","quote","unorderedlist","orderedlist"],firstHeader:"h1",secondHeader:"h2",diffLeft:0,diffTop:-10,disableDoubleReturn:!0}}},shouldComponentUpdate:function(t,e){return!1},componentDidMount:function(){this.setState({editor:new r["default"](this.refs.editor.getDOMNode(),this.props.options)})},componentWillUnmount:function(){this.state.editor.deactivate()},render:function(){return s["default"].createElement("div",{className:"col-block-medium"},s["default"].createElement("div",{className:"col-medium",onBlur:this._onBlur,role:"textarea","aria-multiline":"true",ref:"editor",dangerouslySetInnerHTML:{__html:this.props.content.html}}),this.props.children)},_onBlur:function(){var t=this.refs.editor.getDOMNode();this.props.onChange({text:t.textContent,html:t.innerHTML})}});t.exports=u},1:function(t,e,n){t.exports=require("react")},13:function(t,e,n){"use strict";function o(t,e){return this.init(t,e)}t.exports=o,function(t,e){function n(t,e){var n;if(void 0===t)return e;for(n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)===!1&&(t[n]=e[n]);return t}function i(t,e){for(var n=e.parentNode;null!==n;){if(n===t)return!0;n=n.parentNode}return!1}function r(){var t,e,n,o=this.options.contentWindow.getSelection();if(o.getRangeAt&&o.rangeCount){for(n=[],t=0,e=o.rangeCount;e>t;t+=1)n.push(o.getRangeAt(t));return n}return null}function a(t){var e,n,o=this.options.contentWindow.getSelection();if(t)for(o.removeAllRanges(),e=0,n=t.length;n>e;e+=1)o.addRange(t[e])}function s(){var t=this.options.ownerDocument.getSelection().anchorNode,e=t&&3===t.nodeType?t.parentNode:t;return e}function u(){var t,e,n,o,i="";if(void 0!==this.options.contentWindow.getSelection){if(e=this.options.contentWindow.getSelection(),e.rangeCount){for(o=this.options.ownerDocument.createElement("div"),t=0,n=e.rangeCount;n>t;t+=1)o.appendChild(e.getRangeAt(t).cloneContents());i=o.innerHTML}}else void 0!==this.options.ownerDocument.selection&&"Text"===this.options.ownerDocument.selection.type&&(i=this.options.ownerDocument.selection.createRange().htmlText);return i}function l(t){return!(!t||1!==t.nodeType)}o.prototype={defaults:{allowMultiParagraphSelection:!0,anchorInputPlaceholder:"Paste or type a link",anchorPreviewHideDelay:500,buttons:["bold","italic","underline","anchor","header1","header2","quote"],buttonLabels:!1,checkLinkFormat:!1,cleanPastedHTML:!1,delay:0,diffLeft:0,diffTop:-10,disableReturn:!1,disableDoubleReturn:!1,disableToolbar:!1,disableEditing:!1,elementsContainer:!1,contentWindow:t,ownerDocument:e,firstHeader:"h3",forcePlainText:!0,placeholder:"Type your text",secondHeader:"h4",targetBlank:!1,anchorTarget:!1,anchorButton:!1,anchorButtonClass:"btn",extensions:{},activeButtonClass:"medium-editor-button-active",firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last"},isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),init:function(t,o){return this.options=n(o,this.defaults),this.setElementSelection(t),0!==this.elements.length?(this.parentElements=["p","h1","h2","h3","h4","h5","h6","blockquote","pre"],this.options.elementsContainer||(this.options.elementsContainer=e.body),this.id=this.options.elementsContainer.querySelectorAll(".medium-editor-toolbar").length+1,this.setup()):void 0},setup:function(){this.events=[],this.isActive=!0,this.initElements().bindSelect().bindPaste().setPlaceholders().bindWindowActions().passInstance()},on:function(t,e,n,o){t.addEventListener(e,n,o),this.events.push([t,e,n,o])},off:function(t,e,n,o){var i,r=this.events.indexOf([t,e,n,o]);-1!==r&&(i=this.events.splice(r,1),i[0].removeEventListener(i[1],i[2],i[3]))},removeAllEvents:function(){for(var t=this.events.pop();t;)t[0].removeEventListener(t[1],t[2],t[3]),t=this.events.pop()},initElements:function(){this.updateElementList();var t,e=!1;for(t=0;t<this.elements.length;t+=1)this.options.disableEditing||this.elements[t].getAttribute("data-disable-editing")||this.elements[t].setAttribute("contentEditable",!0),this.elements[t].getAttribute("data-placeholder")||this.elements[t].setAttribute("data-placeholder",this.options.placeholder),this.elements[t].setAttribute("data-medium-element",!0),this.bindParagraphCreation(t).bindReturn(t).bindTab(t),this.options.disableToolbar||this.elements[t].getAttribute("data-disable-toolbar")||(e=!0);return e&&this.initToolbar().bindButtons().bindAnchorForm().bindAnchorPreview(),this},setElementSelection:function(t){this.elementSelection=t,this.updateElementList()},updateElementList:function(){this.elements="string"==typeof this.elementSelection?this.options.ownerDocument.querySelectorAll(this.elementSelection):this.elementSelection,1===this.elements.nodeType&&(this.elements=[this.elements])},serialize:function(){var t,e,n={};for(t=0;t<this.elements.length;t+=1)e=""!==this.elements[t].id?this.elements[t].id:"element-"+t,n[e]={value:this.elements[t].innerHTML.trim()};return n},callExtensions:function(t){if(!(arguments.length<1)){var e,n,o=Array.prototype.slice.call(arguments,1);for(n in this.options.extensions)this.options.extensions.hasOwnProperty(n)&&(e=this.options.extensions[n],void 0!==e[t]&&e[t].apply(e,o))}},passInstance:function(){var t,e,n=this;for(e in n.options.extensions)n.options.extensions.hasOwnProperty(e)&&(t=n.options.extensions[e],t.parent&&(t.base=n));return n},bindParagraphCreation:function(t){var n=this;return this.on(this.elements[t],"keypress",function(t){var o,i=s.call(n);32===t.which&&(o=i.tagName.toLowerCase(),"a"===o&&e.execCommand("unlink",!1,null))}),this.on(this.elements[t],"keyup",function(t){var o,i,r=s.call(n);r&&r.getAttribute("data-medium-element")&&0===r.children.length&&!n.options.disableReturn&&!r.getAttribute("data-disable-return")&&e.execCommand("formatBlock",!1,"p"),13===t.which&&(r=s.call(n),o=r.tagName.toLowerCase(),i=n.getSelectionElement(),n.options.disableReturn||i.getAttribute("data-disable-return")||"li"===o||n.isListItemChild(r)||(t.shiftKey||e.execCommand("formatBlock",!1,"p"),"a"===o&&e.execCommand("unlink",!1,null)))}),this},isListItemChild:function(t){for(var e=t.parentNode,n=e.tagName.toLowerCase();-1===this.parentElements.indexOf(n)&&"div"!==n;){if("li"===n)return!0;if(e=e.parentNode,!e||!e.tagName)return!1;n=e.tagName.toLowerCase()}return!1},bindReturn:function(t){var e=this;return this.on(this.elements[t],"keypress",function(t){if(13===t.which)if(e.options.disableReturn||this.getAttribute("data-disable-return"))t.preventDefault();else if(e.options.disableDoubleReturn||this.getAttribute("data-disable-double-return")){var n=s.call(e);n&&"\n"===n.innerText&&t.preventDefault()}}),this},bindTab:function(t){var n=this;return this.on(this.elements[t],"keydown",function(t){if(9===t.which){var o=s.call(n).tagName.toLowerCase();"pre"===o&&(t.preventDefault(),e.execCommand("insertHtml",null,"    ")),"li"===o&&(t.preventDefault(),t.shiftKey?e.execCommand("outdent",t):e.execCommand("indent",t))}}),this},buttonTemplate:function(t){var e=this.getButtonLabels(this.options.buttonLabels),n={bold:'<button class="medium-editor-action medium-editor-action-bold" data-action="bold" data-element="b">'+e.bold+"</button>",italic:'<button class="medium-editor-action medium-editor-action-italic" data-action="italic" data-element="i">'+e.italic+"</button>",underline:'<button class="medium-editor-action medium-editor-action-underline" data-action="underline" data-element="u">'+e.underline+"</button>",strikethrough:'<button class="medium-editor-action medium-editor-action-strikethrough" data-action="strikethrough" data-element="strike">'+e.strikethrough+"</button>",superscript:'<button class="medium-editor-action medium-editor-action-superscript" data-action="superscript" data-element="sup">'+e.superscript+"</button>",subscript:'<button class="medium-editor-action medium-editor-action-subscript" data-action="subscript" data-element="sub">'+e.subscript+"</button>",anchor:'<button class="medium-editor-action medium-editor-action-anchor" data-action="anchor" data-element="a">'+e.anchor+"</button>",image:'<button class="medium-editor-action medium-editor-action-image" data-action="image" data-element="img">'+e.image+"</button>",header1:'<button class="medium-editor-action medium-editor-action-header1" data-action="append-'+this.options.firstHeader+'" data-element="'+this.options.firstHeader+'">'+e.header1+"</button>",header2:'<button class="medium-editor-action medium-editor-action-header2" data-action="append-'+this.options.secondHeader+'" data-element="'+this.options.secondHeader+'">'+e.header2+"</button>",quote:'<button class="medium-editor-action medium-editor-action-quote" data-action="append-blockquote" data-element="blockquote">'+e.quote+"</button>",orderedlist:'<button class="medium-editor-action medium-editor-action-orderedlist" data-action="insertorderedlist" data-element="ol">'+e.orderedlist+"</button>",unorderedlist:'<button class="medium-editor-action medium-editor-action-unorderedlist" data-action="insertunorderedlist" data-element="ul">'+e.unorderedlist+"</button>",pre:'<button class="medium-editor-action medium-editor-action-pre" data-action="append-pre" data-element="pre">'+e.pre+"</button>",indent:'<button class="medium-editor-action medium-editor-action-indent" data-action="indent" data-element="ul">'+e.indent+"</button>",outdent:'<button class="medium-editor-action medium-editor-action-outdent" data-action="outdent" data-element="ul">'+e.outdent+"</button>",justifyCenter:'<button class="medium-editor-action medium-editor-action-justifyCenter" data-action="justifyCenter" data-element="">'+e.justifyCenter+"</button>",justifyFull:'<button class="medium-editor-action medium-editor-action-justifyFull" data-action="justifyFull" data-element="">'+e.justifyFull+"</button>",justifyLeft:'<button class="medium-editor-action medium-editor-action-justifyLeft" data-action="justifyLeft" data-element="">'+e.justifyLeft+"</button>",justifyRight:'<button class="medium-editor-action medium-editor-action-justifyRight" data-action="justifyRight" data-element="">'+e.justifyRight+"</button>"};return n[t]||!1},getButtonLabels:function(t){var e,n,o={bold:"<b>B</b>",italic:"<b><i>I</i></b>",underline:"<b><u>U</u></b>",strikethrough:"<s>A</s>",superscript:"<b>x<sup>1</sup></b>",subscript:"<b>x<sub>1</sub></b>",anchor:"<b>#</b>",image:"<b>image</b>",header1:"<b>H1</b>",header2:"<b>H2</b>",quote:"<b>&ldquo;</b>",orderedlist:"<b>1.</b>",unorderedlist:"<b>&bull;</b>",pre:"<b>0101</b>",indent:"<b>&rarr;</b>",outdent:"<b>&larr;</b>",justifyCenter:"<b>C</b>",justifyFull:"<b>J</b>",justifyLeft:"<b>L</b>",justifyRight:"<b>R</b>"};if("fontawesome"===t?e={bold:'<i class="fa fa-bold"></i>',italic:'<i class="fa fa-italic"></i>',underline:'<i class="fa fa-underline"></i>',strikethrough:'<i class="fa fa-strikethrough"></i>',superscript:'<i class="fa fa-superscript"></i>',subscript:'<i class="fa fa-subscript"></i>',anchor:'<i class="fa fa-link"></i>',image:'<i class="fa fa-picture-o"></i>',quote:'<i class="fa fa-quote-right"></i>',orderedlist:'<i class="fa fa-list-ol"></i>',unorderedlist:'<i class="fa fa-list-ul"></i>',pre:'<i class="fa fa-code fa-lg"></i>',indent:'<i class="fa fa-indent"></i>',outdent:'<i class="fa fa-outdent"></i>',justifyCenter:'<i class="fa fa-align-center"></i>',justifyFull:'<i class="fa fa-align-justify"></i>',justifyLeft:'<i class="fa fa-align-left"></i>',justifyRight:'<i class="fa fa-align-right"></i>'}:"object"==typeof t&&(e=t),"object"==typeof e)for(n in e)e.hasOwnProperty(n)&&(o[n]=e[n]);return o},initToolbar:function(){return this.toolbar?this:(this.toolbar=this.createToolbar(),this.keepToolbarAlive=!1,this.anchorForm=this.toolbar.querySelector(".medium-editor-toolbar-form-anchor"),this.anchorInput=this.anchorForm.querySelector("input.medium-editor-toolbar-anchor-input"),this.anchorTarget=this.anchorForm.querySelector("input.medium-editor-toolbar-anchor-target"),this.anchorButton=this.anchorForm.querySelector("input.medium-editor-toolbar-anchor-button"),this.toolbarActions=this.toolbar.querySelector(".medium-editor-toolbar-actions"),this.anchorPreview=this.createAnchorPreview(),this)},createToolbar:function(){var t=e.createElement("div");return t.id="medium-editor-toolbar-"+this.id,t.className="medium-editor-toolbar",t.appendChild(this.toolbarButtons()),t.appendChild(this.toolbarFormAnchor()),this.options.elementsContainer.appendChild(t),t},toolbarButtons:function(){var t,n,o,i,r=this.options.buttons,a=e.createElement("ul");for(a.id="medium-editor-toolbar-actions",a.className="medium-editor-toolbar-actions clearfix",n=0;n<r.length;n+=1)this.options.extensions.hasOwnProperty(r[n])?(i=this.options.extensions[r[n]],o=void 0!==i.getButton?i.getButton():null):o=this.buttonTemplate(r[n]),o&&(t=e.createElement("li"),l(o)?t.appendChild(o):t.innerHTML=o,a.appendChild(t));return a},toolbarFormAnchor:function(){var t=e.createElement("div"),n=e.createElement("input"),o=e.createElement("label"),i=e.createElement("input"),r=e.createElement("label"),a=e.createElement("input"),s=e.createElement("a"),u=e.createElement("a");return s.setAttribute("href","#"),s.className="medium-editor-toobar-anchor-close",s.innerHTML="&times;",u.setAttribute("href","#"),u.className="medium-editor-toobar-anchor-save",u.innerHTML="&#10003;",n.setAttribute("type","text"),n.className="medium-editor-toolbar-anchor-input",n.setAttribute("placeholder",this.options.anchorInputPlaceholder),i.setAttribute("type","checkbox"),i.className="medium-editor-toolbar-anchor-target",o.innerHTML="Open in New Window?",o.insertBefore(i,o.firstChild),a.setAttribute("type","checkbox"),a.className="medium-editor-toolbar-anchor-button",r.innerHTML="Button",r.insertBefore(a,r.firstChild),t.className="medium-editor-toolbar-form-anchor",t.id="medium-editor-toolbar-form-anchor",t.appendChild(n),t.appendChild(u),t.appendChild(s),this.options.anchorTarget&&t.appendChild(o),this.options.anchorButton&&t.appendChild(r),t},bindSelect:function(){var t,n=this,o="";for(this.checkSelectionWrapper=function(t){return t&&n.clickingIntoArchorForm(t)?!1:(clearTimeout(o),void(o=setTimeout(function(){n.checkSelection()},n.options.delay)))},this.on(e.documentElement,"mouseup",this.checkSelectionWrapper),t=0;t<this.elements.length;t+=1)this.on(this.elements[t],"keyup",this.checkSelectionWrapper),this.on(this.elements[t],"blur",this.checkSelectionWrapper);return this},checkSelection:function(){var t,e;return this.keepToolbarAlive===!0||this.options.disableToolbar||(t=this.options.contentWindow.getSelection(),""===t.toString().trim()||this.options.allowMultiParagraphSelection===!1&&this.hasMultiParagraphs()||this.selectionInContentEditableFalse()?this.hideToolbarActions():(e=this.getSelectionElement(),!e||e.getAttribute("data-disable-toolbar")?this.hideToolbarActions():this.checkSelectionElement(t,e))),this},clickingIntoArchorForm:function(t){var e=this;return t.type&&"blur"===t.type.toLowerCase()&&t.relatedTarget&&t.relatedTarget===e.anchorInput?!0:!1},hasMultiParagraphs:function c(){var t=u.call(this).replace(/<[\S]+><\/[\S]+>/gim,""),c=t.match(/<(p|h[0-6]|blockquote)>([\s\S]*?)<\/(p|h[0-6]|blockquote)>/g);return c?c.length:0},checkSelectionElement:function(t,e){var n;for(this.selection=t,this.selectionRange=this.selection.getRangeAt(0),n=0;n<this.elements.length;n+=1)if(this.elements[n]===e)return void this.setToolbarButtonStates().setToolbarPosition().showToolbarActions();this.hideToolbarActions()},findMatchingSelectionParent:function(t){var e,n,o=this.options.contentWindow.getSelection();if(0===o.rangeCount)return!1;e=o.getRangeAt(0),n=e.commonAncestorContainer;do{if(1===n.nodeType){if(t(n))return n;if(n.getAttribute("data-medium-element"))return!1}n=n.parentNode}while(n);return!1},getSelectionElement:function(){return this.findMatchingSelectionParent(function(t){return t.getAttribute("data-medium-element")})},selectionInContentEditableFalse:function(){return this.findMatchingSelectionParent(function(t){return t&&"#text"!==t.nodeName&&"false"===t.getAttribute("contenteditable")})},setToolbarPosition:function(){var t=50,e=this.options.contentWindow.getSelection(),n=e.getRangeAt(0),o=n.getBoundingClientRect(),i=this.options.diffLeft-this.toolbar.offsetWidth/2,r=(o.left+o.right)/2,a=this.toolbar.offsetWidth/2;return o.top<t?(this.toolbar.classList.add("medium-toolbar-arrow-over"),this.toolbar.classList.remove("medium-toolbar-arrow-under"),this.toolbar.style.top=t+o.bottom-this.options.diffTop+this.options.contentWindow.pageYOffset-this.toolbar.offsetHeight+"px"):(this.toolbar.classList.add("medium-toolbar-arrow-under"),this.toolbar.classList.remove("medium-toolbar-arrow-over"),this.toolbar.style.top=o.top+this.options.diffTop+this.options.contentWindow.pageYOffset-this.toolbar.offsetHeight+"px"),this.toolbar.style.left=a>r?i+a+"px":this.options.contentWindow.innerWidth-r<a?this.options.contentWindow.innerWidth+i-a+"px":i+r+"px",this.hideAnchorPreview(),this},setToolbarButtonStates:function(){var t,e=this.toolbarActions.querySelectorAll("button");for(t=0;t<e.length;t+=1)e[t].classList.remove(this.options.activeButtonClass);return this.checkActiveButtons(),this},checkActiveButtons:function(){for(var t=Array.prototype.slice.call(this.elements),e=this.getSelectedParentElement();void 0!==e.tagName&&-1===this.parentElements.indexOf(e.tagName.toLowerCase)&&(this.activateButton(e.tagName.toLowerCase()),this.callExtensions("checkState",e),-1===t.indexOf(e));)e=e.parentNode},activateButton:function(t){var e=this.toolbar.querySelector('[data-element="'+t+'"]');null!==e&&-1===e.className.indexOf(this.options.activeButtonClass)&&(e.className+=" "+this.options.activeButtonClass)},bindButtons:function(){var t,e=this.toolbar.querySelectorAll("button"),n=this,o=function(t){t.preventDefault(),t.stopPropagation(),void 0===n.selection&&n.checkSelection(),this.className.indexOf(n.options.activeButtonClass)>-1?this.classList.remove(n.options.activeButtonClass):this.className+=" "+n.options.activeButtonClass,this.hasAttribute("data-action")&&n.execAction(this.getAttribute("data-action"),t)};for(t=0;t<e.length;t+=1)this.on(e[t],"click",o);return this.setFirstAndLastItems(e),this},setFirstAndLastItems:function(t){return t.length>0&&(t[0].className+=" "+this.options.firstButtonClass,t[t.length-1].className+=" "+this.options.lastButtonClass),this},execAction:function(t,e){t.indexOf("append-")>-1?(this.execFormatBlock(t.replace("append-","")),this.setToolbarPosition(),this.setToolbarButtonStates()):"anchor"===t?this.triggerAnchorAction(e):"image"===t?this.options.ownerDocument.execCommand("insertImage",!1,this.options.contentWindow.getSelection()):(this.options.ownerDocument.execCommand(t,!1,null),this.setToolbarPosition())},rangeSelectsSingleNode:function(t){var e=t.startContainer;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===t.startOffset+1},getSelectedParentElement:function(){var t=null,e=this.selectionRange;return t=this.rangeSelectsSingleNode(e)?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer},triggerAnchorAction:function(){var t=this.getSelectedParentElement();return t.tagName&&"a"===t.tagName.toLowerCase()?this.options.ownerDocument.execCommand("unlink",!1,null):"block"===this.anchorForm.style.display?this.showToolbarActions():this.showAnchorForm(),this},execFormatBlock:function(t){var e=this.getSelectionData(this.selection.anchorNode);if("blockquote"===t&&e.el&&"blockquote"===e.el.parentNode.tagName.toLowerCase())return this.options.ownerDocument.execCommand("outdent",!1,null);if(e.tagName===t&&(t="p"),this.isIE){if("blockquote"===t)return this.options.ownerDocument.execCommand("indent",!1,t);t="<"+t+">"}return this.options.ownerDocument.execCommand("formatBlock",!1,t)},getSelectionData:function(t){var e;for(t&&t.tagName&&(e=t.tagName.toLowerCase());t&&-1===this.parentElements.indexOf(e);)t=t.parentNode,t&&t.tagName&&(e=t.tagName.toLowerCase());return{el:t,tagName:e}},getFirstChild:function(t){for(var e=t.firstChild;null!==e&&1!==e.nodeType;)e=e.nextSibling;return e},hideToolbarActions:function(){this.keepToolbarAlive=!1,void 0!==this.toolbar&&this.toolbar.classList.remove("medium-editor-toolbar-active")},showToolbarActions:function(){var t,e=this;this.anchorForm.style.display="none",this.toolbarActions.style.display="block",this.keepToolbarAlive=!1,clearTimeout(t),t=setTimeout(function(){e.toolbar&&!e.toolbar.classList.contains("medium-editor-toolbar-active")&&e.toolbar.classList.add("medium-editor-toolbar-active")},100)},saveSelection:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){this.savedSelection=r.call(this)}),restoreSelection:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){a.call(this,this.savedSelection)}),showAnchorForm:function(t){this.toolbarActions.style.display="none",this.saveSelection(),this.anchorForm.style.display="block",this.setToolbarPosition(),this.keepToolbarAlive=!0,this.anchorInput.focus(),this.anchorInput.value=t||""},bindAnchorForm:function(){var t=this.anchorForm.querySelector("a.medium-editor-toobar-anchor-close"),e=this.anchorForm.querySelector("a.medium-editor-toobar-anchor-save"),n=this;return this.on(this.anchorForm,"click",function(t){t.stopPropagation(),n.keepToolbarAlive=!0}),this.on(this.anchorInput,"keyup",function(t){var e,o=null;13===t.keyCode&&(t.preventDefault(),e=n.options.anchorTarget&&n.anchorTarget.checked?"_blank":"_self",n.options.anchorButton&&n.anchorButton.checked&&(o=n.options.anchorButtonClass),n.createLink(this,e,o))}),this.on(e,"click",function(t){var e,o=null;t.preventDefault(),e=n.options.anchorTarget&&n.anchorTarget.checked?"_blank":"_self",n.options.anchorButton&&n.anchorButton.checked&&(o=n.options.anchorButtonClass),n.createLink(n.anchorInput,e,o)},!0),this.on(this.anchorInput,"click",function(t){t.stopPropagation(),n.keepToolbarAlive=!0}),this.on(this.options.ownerDocument.body,"click",function(t){t.target===n.anchorForm||i(n.anchorForm,t.target)||i(n.toolbarActions,t.target)||(n.keepToolbarAlive=!1,n.checkSelection())},!0),this.on(this.options.ownerDocument.body,"focus",function(t){t.target===n.anchorForm||i(n.anchorForm,t.target)||i(n.toolbarActions,t.target)||(n.keepToolbarAlive=!1,n.checkSelection())},!0),this.on(t,"click",function(t){t.preventDefault(),n.showToolbarActions(),a.call(n,n.savedSelection)}),this},hideAnchorPreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active")},showAnchorPreview:function(t){if(this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||t.getAttribute("data-disable-preview"))return!0;var e,n,o,i=this,r=40,a=t.getBoundingClientRect(),s=(a.left+a.right)/2;return i.anchorPreview.querySelector("i").textContent=t.href,e=i.anchorPreview.offsetWidth/2,n=i.options.diffLeft-e,clearTimeout(o),o=setTimeout(function(){i.anchorPreview&&!i.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&i.anchorPreview.classList.add("medium-editor-anchor-preview-active")},100),i.observeAnchorPreview(t),i.anchorPreview.classList.add("medium-toolbar-arrow-over"),i.anchorPreview.classList.remove("medium-toolbar-arrow-under"),i.anchorPreview.style.top=Math.round(r+a.bottom-i.options.diffTop+this.options.contentWindow.pageYOffset-i.anchorPreview.offsetHeight)+"px",i.anchorPreview.style.left=e>s?n+e+"px":this.options.contentWindow.innerWidth-s<e?this.options.contentWindow.innerWidth+n-e+"px":n+s+"px",this},observeAnchorPreview:function(t){var e=this,n=(new Date).getTime(),o=!0,i=function(){n=(new Date).getTime(),o=!0},r=function(t){t.relatedTarget&&/anchor-preview/.test(t.relatedTarget.className)||(o=!1)},a=setInterval(function(){if(o)return!0;var s=(new Date).getTime()-n;s>e.options.anchorPreviewHideDelay&&(e.hideAnchorPreview(),clearInterval(a),e.off(e.anchorPreview,"mouseover",i),e.off(e.anchorPreview,"mouseout",r),e.off(t,"mouseover",i),e.off(t,"mouseout",r))},200);this.on(e.anchorPreview,"mouseover",i),this.on(e.anchorPreview,"mouseout",r),this.on(t,"mouseover",i),this.on(t,"mouseout",r)},createAnchorPreview:function(){var t=this,e=this.options.ownerDocument.createElement("div");return e.id="medium-editor-anchor-preview-"+this.id,e.className="medium-editor-anchor-preview",e.innerHTML=this.anchorPreviewTemplate(),this.options.elementsContainer.appendChild(e),this.on(e,"click",function(){t.anchorPreviewClickHandler()}),e},anchorPreviewTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <i class="medium-editor-toolbar-anchor-preview-inner"></i></div>'},anchorPreviewClickHandler:function(t){if(this.activeAnchor){var e=this,n=this.options.ownerDocument.createRange(),o=this.options.contentWindow.getSelection();n.selectNodeContents(e.activeAnchor),o.removeAllRanges(),o.addRange(n),setTimeout(function(){e.activeAnchor&&e.showAnchorForm(e.activeAnchor.href),e.keepToolbarAlive=!1},100+e.options.delay)}this.hideAnchorPreview()},editorAnchorObserver:function(t){var e=this,n=!0,o=function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){n=!1,e.off(e.activeAnchor,"mouseout",o)});if(t.target&&"a"===t.target.tagName.toLowerCase()){if(!/href=["']\S+["']/.test(t.target.outerHTML)||/href=["']#\S+["']/.test(t.target.outerHTML))return!0;if(this.toolbar.classList.contains("medium-editor-toolbar-active"))return!0;this.activeAnchor=t.target,this.on(this.activeAnchor,"mouseout",o),setTimeout(function(){n&&e.showAnchorPreview(t.target)},e.options.delay)}},bindAnchorPreview:function(t){var e,n=this;for(this.editorAnchorObserverWrapper=function(t){n.editorAnchorObserver(t)},e=0;e<this.elements.length;e+=1)this.on(this.elements[e],"mouseover",this.editorAnchorObserverWrapper);return this},checkLinkFormat:function(t){var e=/^(https?|ftps?|rtmpt?):\/\/|mailto:/;return(e.test(t)?"":"http://")+t},setTargetBlank:function(t){var e;if(t=t||s.call(this),"a"===t.tagName.toLowerCase())t.target="_blank";else for(t=t.getElementsByTagName("a"),e=0;e<t.length;e+=1)t[e].target="_blank"},setButtonClass:function(t){var e,n,o=s.call(this),i=t.split(" ");if("a"===o.tagName.toLowerCase())for(n=0;n<i.length;n+=1)o.classList.add(i[n]);else for(o=o.getElementsByTagName("a"),e=0;e<o.length;e+=1)for(n=0;n<i.length;n+=1)o[e].classList.add(i[n])},createLink:function(t,e,n){var o,i;if(0===t.value.trim().length)return void this.hideToolbarActions();if(a.call(this,this.savedSelection),this.options.checkLinkFormat&&(t.value=this.checkLinkFormat(t.value)),this.options.ownerDocument.execCommand("createLink",!1,t.value),(this.options.targetBlank||"_blank"===e)&&this.setTargetBlank(),n&&this.setButtonClass(n),this.options.targetBlank||"_blank"===e||n)for(i=this.options.ownerDocument.createEvent("HTMLEvents"),i.initEvent("input",!0,!0,this.options.contentWindow),o=0;o<this.elements.length;o+=1)this.elements[o].dispatchEvent(i);this.checkSelection(),this.showToolbarActions(),t.value=""},bindWindowActions:function(){var t,e=this;return this.windowResizeHandler=function(){clearTimeout(t),t=setTimeout(function(){e.toolbar&&e.toolbar.classList.contains("medium-editor-toolbar-active")&&e.setToolbarPosition()},100)},this.on(this.options.contentWindow,"resize",this.windowResizeHandler),this},activate:function(){this.isActive||this.setup()},deactivate:function(){var t;if(this.isActive){for(this.isActive=!1,void 0!==this.toolbar&&(this.options.elementsContainer.removeChild(this.anchorPreview),this.options.elementsContainer.removeChild(this.toolbar),delete this.toolbar,delete this.anchorPreview),t=0;t<this.elements.length;t+=1)this.elements[t].removeAttribute("contentEditable"),this.elements[t].removeAttribute("data-medium-element");this.removeAllEvents()}},htmlEntities:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},bindPaste:function(){var t,e=this;for(this.pasteWrapper=function(t){var n,o,i="";if(this.classList.remove("medium-editor-placeholder"),!e.options.forcePlainText&&!e.options.cleanPastedHTML)return this;if(t.clipboardData&&t.clipboardData.getData&&!t.defaultPrevented){if(t.preventDefault(),e.options.cleanPastedHTML&&t.clipboardData.getData("text/html"))return e.cleanPaste(t.clipboardData.getData("text/html"));if(e.options.disableReturn||this.getAttribute("data-disable-return"))i=e.htmlEntities(t.clipboardData.getData("text/plain")),e.options.ownerDocument.execCommand("insertHTML",!1,i);else{for(n=t.clipboardData.getData("text/plain").split(/[\r\n]/g),o=0;o<n.length;o+=1)""!==n[o]&&(i+=navigator.userAgent.match(/firefox/i)&&0===o?e.htmlEntities(n[o]):"<p>"+e.htmlEntities(n[o])+"</p>");e.options.ownerDocument.execCommand("insertHTML",!1,i)}}},t=0;t<this.elements.length;t+=1)this.on(this.elements[t],"paste",this.pasteWrapper);return this},setPlaceholders:function(){var t,e=function(t){t.querySelector("img")||t.querySelector("blockquote")||""!==t.textContent.replace(/^\s+|\s+$/g,"")||t.classList.add("medium-editor-placeholder")},n=function(t){this.classList.remove("medium-editor-placeholder"),"keypress"!==t.type&&e(this)};for(t=0;t<this.elements.length;t+=1)e(this.elements[t]),this.on(this.elements[t],"blur",n),this.on(this.elements[t],"keypress",n);return this},cleanPaste:function(t){var e,n,o,i=this.getSelectionElement(),r=/<p|<br|<div/.test(t),a=[[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:bold|font-weight:bold;font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:bold[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a\s+href=(&quot;|&rdquo;|&ldquo;|“|”)([^&]+)(&quot;|&rdquo;|&ldquo;|“|”)&gt;/gi),'<a href="$2">']];for(e=0;e<a.length;e+=1)t=t.replace(a[e][0],a[e][1]);if(r)for(n=t.split("<br><br>"),this.pasteHTML("<p>"+n.join("</p><p>")+"</p>"),this.options.ownerDocument.execCommand("insertText",!1,"\n"),n=i.querySelectorAll("a,p,div,br"),e=0;e<n.length;e+=1)switch(o=n[e],o.tagName.toLowerCase()){case"a":this.options.targetBlank&&this.setTargetBlank(o);break;case"p":case"div":this.filterCommonBlocks(o);break;case"br":this.filterLineBreak(o)}else this.pasteHTML(t)},pasteHTML:function(t){var e,n,o,i,r=this.options.ownerDocument.createDocumentFragment();for(r.appendChild(this.options.ownerDocument.createElement("body")),i=r.querySelector("body"),i.innerHTML=t,this.cleanupSpans(i),e=i.querySelectorAll("*"),o=0;o<e.length;o+=1)n=e[o],n.removeAttribute("class"),n.removeAttribute("style"),n.removeAttribute("dir"),"meta"===n.tagName.toLowerCase()&&n.parentNode.removeChild(n);this.options.ownerDocument.execCommand("insertHTML",!1,i.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(t){return t&&("p"===t.tagName.toLowerCase()||"div"===t.tagName.toLowerCase())},filterCommonBlocks:function(t){/^\s*$/.test(t.innerText)&&t.parentNode.removeChild(t)},filterLineBreak:function(t){this.isCommonBlock(t.previousElementSibling)?t.parentNode.removeChild(t):!this.isCommonBlock(t.parentNode)||t.parentNode.firstChild!==t&&t.parentNode.lastChild!==t?1===t.parentNode.childElementCount&&this.removeWithParent(t):t.parentNode.removeChild(t);

},removeWithParent:function(t){t&&t.parentNode&&(t.parentNode.parentNode&&1===t.parentNode.childElementCount?t.parentNode.parentNode.removeChild(t.parentNode):t.parentNode.removeChild(t.parentNode))},cleanupSpans:function(t){var e,n,o,i=t.querySelectorAll(".replace-with");for(e=0;e<i.length;e+=1)n=i[e],o=this.options.ownerDocument.createElement(n.classList.contains("bold")?"b":"i"),o.innerHTML=n.classList.contains("bold")&&n.classList.contains("italic")?"<i>"+n.innerHTML+"</i>":n.innerHTML,n.parentNode.replaceChild(o,n);for(i=t.querySelectorAll("span"),e=0;e<i.length;e+=1)n=i[e],/^\s*$/.test()?n.parentNode.removeChild(n):n.parentNode.replaceChild(this.options.ownerDocument.createTextNode(n.innerText),n)}}}(window,document)},38:function(t,e,n){}});
//# sourceMappingURL=medium.js.map